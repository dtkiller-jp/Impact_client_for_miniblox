!function(){"use strict";let t={},e={};function n(e,n,o=!1){t[e]=[n,o]}function o(t,n){e[t]=n}o("moveStrafeDump","this\\.([a-zA-Z]+)=\\([a-zA-Z]+\\.right"),o("moveForwardDump","this\\.([a-zA-Z]+)=\\([a-zA-Z]+\\.(up|down)"),o("keyPressedDump","function ([a-zA-Z]*)\\([a-zA-Z]*\\){return keyPressed\\([a-zA-Z]*\\)"),o("entitiesDump","this.([a-zA-Z]*).values\\(\\)\\)[a-zA-Z]* instanceof EntityTNTPrimed"),o("isInvisibleDump","[a-zA-Z]*.([a-zA-Z]*)\\(\\)\\)&&\\([a-zA-Z]*=new ([a-zA-Z]*)\\(new"),o("attackDump","hitVec.z}\\)}\\)\\),player.([a-zA-Z]*)"),o("lastReportedYawDump","this.([a-zA-Z]*)=this.yaw,this.last"),o("windowClickDump","([a-zA-Z]*)\\(this.inventorySlots.windowId"),o("playerControllerDump","const ([a-zA-Z]*)=new PlayerController,"),o("damageReduceAmountDump","ItemArmor&&\\([a-zA-Z]*\\+\\=[a-zA-Z]*.([a-zA-Z]*)"),o("boxGeometryDump","w=new Mesh\\(new ([a-zA-Z]*)\\(1"),o("syncItemDump","playerControllerMP.([a-zA-Z]*)\\(\\),ClientSocket.sendPacket"),n('document.addEventListener("DOMContentLoaded",startGame,!1);','\n\t\tsetTimeout(function() {\n\t\t\tvar DOMContentLoaded_event = document.createEvent("Event");\n\t\t\tDOMContentLoaded_event.initEvent("DOMContentLoaded", true, true);\n\t\t\tdocument.dispatchEvent(DOMContentLoaded_event);\n\t\t}, 0);\n\t'),n("y:this.getEntityBoundingBox().min.y,","y:sendY != false ? sendY : this.getEntityBoundingBox().min.y,",!0),n('Potions.jump.getId(),"5");','\n\t\tlet blocking = false;\n\t\tlet sendYaw = false;\n\t\tlet sendY = false;\n\t\tlet breakStart = Date.now();\n\t\tlet noMove = Date.now();\n\n\t\tlet enabledModules = {};\n\t\tlet modules = {};\n\n\t\tlet keybindCallbacks = {};\n\t\tlet keybindList = {};\n\n\t\tlet tickLoop = {};\n\t\tlet renderTickLoop = {};\n\n\t\tlet lastJoined, velocityhori, velocityvert, chatdisablermsg, textguifont, textguisize, textguishadow, attackedEntity, stepheight;\n\t\tlet attackTime = Date.now();\n\t\tlet chatDelay = Date.now();\n\n\t\tfunction getModule(str) {\n\t\t\tfor(const [name, module] of Object.entries(modules)) {\n\t\t\t\tif (name.toLocaleLowerCase() == str.toLocaleLowerCase()) return module;\n\t\t\t}\n\t\t}\n\n\t\tlet j;\n\t\tfor (j = 0; j < 26; j++) keybindList[j + 65] = keybindList["Key" + String.fromCharCode(j + 65)] = String.fromCharCode(j + 97);\n\t\tfor (j = 0; j < 10; j++) keybindList[48 + j] = keybindList["Digit" + j] = "" + j;\n\t\twindow.addEventListener("keydown", function(key) {\n\t\t\tconst func = keybindCallbacks[keybindList[key.code]];\n\t\t\tif (func) func(key);\n\t\t});\n\t'),n('VERSION$1," | ",',`"${vapeName} v${VERSION}"," | ",`),n("if(!x.canConnect){",'x.errorMessage = x.errorMessage === "Could not join server. You are connected to a VPN or proxy. Please disconnect from it and refresh the page." ? "You\'re maybe IP banned or you\'re using a vpn " : x.errorMessage;'),n('I(this,"glintTexture");','\n\t\tI(this, "vapeTexture");\n\t\tI(this, "v4Texture");\n\t');const a=t=>new URL(`https://corsproxy.io/?url=${t}`).href;n("skinManager.loadTextures(),",",this.loadVape(),"),n("async loadSpritesheet(){",`\n\t\tasync loadVape() {\n\t\t\tthis.vapeTexture = await this.loader.loadAsync("${a("https://raw.githubusercontent.com/progmem-cc/miniblox.impact.client.updatedv2/refs/heads/main/logo.png")}");\n\t\t\tthis.v4Texture = await this.loader.loadAsync("${a("https://raw.githubusercontent.com/progmem-cc/miniblox.impact.client.updatedv2/refs/heads/main/logov4.png")}");\n\t\t}\n\t\tasync loadSpritesheet(){\n\t`,!0),n("player.setPositionAndRotation(h.x,h.y,h.z,h.yaw,h.pitch),","\n\t\tnoMove = Date.now() + 500;\n\t\tplayer.setPositionAndRotation(h.x,h.y,h.z,h.yaw,h.pitch),\n\t",!0),n("COLOR_TOOLTIP_BG,BORDER_SIZE)}",'\n\t\tfunction drawImage(ctx, img, posX, posY, sizeX, sizeY, color) {\n\t\t\tif (color) {\n\t\t\t\tctx.fillStyle = color;\n\t\t\t\tctx.fillRect(posX, posY, sizeX, sizeY);\n\t\t\t\tctx.globalCompositeOperation = "destination-in";\n\t\t\t}\n\t\t\tctx.drawImage(img, posX, posY, sizeX, sizeY);\n\t\t\tif (color) ctx.globalCompositeOperation = "source-over";\n\t\t}\n\t'),n("+=h*y+u*x}","\n\t\tif (this == player) {\n\t\t\tfor(const [index, func] of Object.entries(tickLoop)) if (func) func();\n\t\t}\n\t"),n('this.game.unleash.isEnabled("disable-ads")',"true",!0),n("h.render()})","; for(const [index, func] of Object.entries(renderTickLoop)) if (func) func();"),n('updateNameTag(){let h="white",p=1;',"this.entity.team = this.entity.profile.cosmetics.color;"),n("connect(u,h=!1,p=!1){","lastJoined = u;"),n('SliderOption("Render Distance ",2,8,3)','SliderOption("Render Distance ",2,64,3)',!0),n('ClientSocket.on("CPacketDisconnect",h=>{','\n\t\tif (enabledModules["AutoRejoin"]) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tj.connect(lastJoined);\n\t\t\t}, 400);\n\t\t}\n\t'),n('ClientSocket.on("CPacketMessage",h=>{','\n\t\tif (player && h.text && !h.text.startsWith(player.name) && enabledModules["ChatDisabler"] && chatDelay < Date.now()) {\n\t\t\tchatDelay = Date.now() + 1000;\n\t\t\tsetTimeout(function() {\n\t\t\t\tClientSocket.sendPacket(new SPacketMessage({text: Math.random() + ("\\n" + chatdisablermsg[1]).repeat(20)}));\n\t\t\t}, 50);\n\t\t}\n\n\t\tif (h.text && h.text.startsWith("\\\\bold\\\\How to play:")) {\n\t\t\tbreakStart = Date.now() + 25000;\n\t\t}\n\n\t\tif (h.text && h.text.indexOf("Poll started") != -1 && h.id == undefined && enabledModules["AutoVote"]) {\n\t\t\tClientSocket.sendPacket(new SPacketMessage({text: "/vote 2"}));\n\t\t}\n\n\t\tif (h.text && h.text.indexOf("won the game") != -1 && h.id == undefined && enabledModules["AutoQueue"]) {\n\t\t\tgame.requestQueue();\n\t\t}\n\t'),n('ClientSocket.on("CPacketUpdateStatus",h=>{','\n\t\tif (h.rank && h.rank != "" && RANK.LEVEL[$.rank].permLevel > 2) {\n\t\t\tgame.chat.addChat({\n\t\t\t\ttext: "STAFF DETECTED : " + h.rank + "\\n".repeat(10),\n\t\t\t\tcolor: "red"\n\t\t\t});\n\t\t}\n\t'),n('bindKeysWithDefaults("b",m=>{','bindKeysWithDefaults("semicolon",m=>{',!0),n('bindKeysWithDefaults("i",m=>{','bindKeysWithDefaults("apostrophe",m=>{',!0),n('b=keyPressedDump("shift")||touchcontrols.sprinting','||enabledModules["Sprint"]'),n('"CPacketEntityVelocity",h=>{const p=m.world.entitiesDump.get(h.id);','\n\t\tif (player && h.id == player.id && enabledModules["Velocity"]) {\n\t\t\tif (velocityhori[1] == 0 && velocityvert[1] == 0) return;\n\t\t\th.motion = new Vector3$1($.motion.x * velocityhori[1], h.motion.y * velocityvert[1], h.motion.z * velocityhori[1]);\n\t\t}\n\t'),n('"CPacketExplosion",h=>{','\n\t\tif (h.playerPos && enabledModules["Velocity"]) {\n\t\t\tif (velocityhori[1] == 0 && velocityvert[1] == 0) return;\n\t\t\th.playerPos = new Vector3$1(h.playerPos.x * velocityhori[1], h.playerPos.y * velocityvert[1], h.playerPos.z * velocityhori[1]);\n\t\t}\n\t'),n("g>0&&(h.addVelocity(-Math.sin(this.yaw*Math.PI/180)*g*.5,.1,Math.cos(this.yaw*Math.PI/180)*g*.5),this.motion.x*=.6,this.motion.z*=.6)",'\n\t\tif (g > 0) {\nh.addVelocity(-Math.sin(this.yaw) * g * .5, .1, -Math.cos(this.yaw) * g * .5);\n\t\t\tif (this != player || !enabledModules["KeepSprint"]) {\n\t\t\t\tthis.motion.x *= .6;\n\t\t\t\tthis.motion.z *= .6;\n\t\t\t\tthis.setSprinting(!1);\n\t\t\t}\n\t\t}\n\t',!0),n("else player.isBlocking()?","else (player.isBlocking() || blocking)?",!0),n("this.entity.isBlocking()","(this.entity.isBlocking() || this.entity == player && blocking)",!0),n("this.yaw-this.","(sendYaw || this.yaw)-this.",!0),n("x.yaw=player.yaw","x.yaw=(sendYaw || this.yaw)",!0),n("this.lastReportedYawDump=this.yaw,","this.lastReportedYawDump=(sendYaw || this.yaw),",!0),n("this.neck.rotation.y=controls.yaw","this.neck.rotation.y=(sendYaw||controls.yaw)",!0),n("updatePlayerMoveState(),this.isUsingItem()",'updatePlayerMoveState(),(this.isUsingItem() && !enabledModules["NoSlowdown"])',!0),n("S&&!this.isUsingItem()",'S&&!(this.isUsingItem() && !enabledModules["NoSlowdown"])',!0),n("p.y=this.stepHeight;",'p.y=(enabledModules["Step"]?Math.max(stepheight[1],this.stepHeight):this.stepHeight);',!0),n("this.dead||this.getHealth()<=0)return;",'\n\t\tif (enabledModules["WTap"]) player.serverSprintState = false;\n\t'),n("u&&player.mode.isCreative()",'||enabledModules["FastBreak"]'),n("keyPressed(m)&&Game.isActive(!1)",'keyPressed(m)&&(Game.isActive(!1)||enabledModules["InvWalk"]&&!game.chat.showInput)',!0),n("calculateXOffset(A,this.getEntityBoundingBox(),g.x)",'enabledModules["Phase"] ? g.x : calculateXOffset(A,this.getEntityBoundingBox(),g.x)',!0),n("calculateYOffset(A,this.getEntityBoundingBox(),g.y)",'enabledModules["Phase"] && !enabledModules["Scaffold"] && keyPressedDump("shift") ? g.y : calculateYOffset(A,this.getEntityBoundingBox(),g.y)',!0),n("calculateZOffset(A,this.getEntityBoundingBox(),g.z)",'enabledModules["Phase"] ? g.z : calculateZOffset(A,this.getEntityBoundingBox(),g.z)',!0),n("pushOutOfBlocks(u,h,p){",'if (enabledModules["Phase"]) return;'),n("this.game.info.showSignEditor=null,exitPointerLock())",'\n\t\tif (this.showDeathScreen && enabledModules["AutoRespawn"]) {\n\t\t\tClientSocket.sendPacket(new SPacketRespawn$1);\n\t\t}\n\t'),n(")&&(p.mesh.visible=this.shouldRenderEntity(p))",'\n\t\tif (enabledModules["Chams"] && p && p.id != player.id) {\n\t\t\tfor(const mesh in p.mesh.meshes) {\n\t\t\t\tp.mesh.meshes[mesh].material.depthTest = false;\n\t\t\t\tp.mesh.meshes[mesh].renderOrder = 3;\n\t\t\t}\n\n\t\t\tfor(const mesh in p.mesh.armorMesh) {\n\t\t\t\tp.mesh.armorMesh[mesh].material.depthTest = false;\n\t\t\t\tp.mesh.armorMesh[mesh].renderOrder = 4;\n\t\t\t}\n\n\t\t\tif (p.mesh.capeMesh) {\n\t\t\t\tp.mesh.capeMesh.children[0].material.depthTest = false;\n\t\t\t\tp.mesh.capeMesh.children[0].renderOrder = 5;\n\t\t\t}\n\n\t\t\tif (p.mesh.hatMesh) {\n\t\t\t\tfor(const mesh of p.mesh.hatMesh.children[0].children) {\n\t\t\t\t\tif (!mesh.material) continue;\n\t\t\t\t\tmesh.material.depthTest = false;\n\t\t\t\t\tmesh.renderOrder = 4;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t'),n('new SPacketLoginStart({requestedUuid:localStorage.getItem(REQUESTED_UUID_KEY)??void 0,session:localStorage.getItem(SESSION_TOKEN_KEY)??"",hydration:localStorage.getItem("hydration")??"0",metricsId:localStorage.getItem("metrics_id")??"",clientVersion:VERSION$1})','new SPacketLoginStart({requestedUuid:void 0,session:(enabledModules["AntiBan"] ? "" : (localStorage.getItem(SESSION_TOKEN_KEY) ?? "")),hydration:"0",metricsId:uuid$1(),clientVersion:VERSION$1})',!0),n("Object.assign(keyMap,u)",'; keyMap["Semicolon"] = "semicolon"; keyMap["Apostrophe"] = "apostrophe";'),n("player.getActiveItemStack().item instanceof","null == ",!0),n("submit(u){",`\n\t\tconst str = this.inputValue.toLocaleLowerCase();\n\t\tconst args = str.split(" ");\n\t\tlet chatString;\n\t\tswitch (args[0]) {\n\t\t\tcase ".bind": {\n\t\t\t\tconst module = args.length > 2 && getModule(args[1]);\n\t\t\t\tif (module) module.setbind(args[2] == "none" ? "" : args[2], true);\n\t\t\t\treturn this.closeInput();\n\t\t\t}\n\t\t\tcase ".t":\n\t\t\tcase ".toggle":\n\t\t\t\tif (args.length > 1) {\n\t\t\t\t\tconst module = args.length > 1 && getModule(args[1]);\n\t\t\t\t\tif (module) {\n\t\t\t\t\t\tmodule.toggle();\n\t\t\t\t\t\tgame.chat.addChat({\n\t\t\t\t\t\t\ttext: module.name + (module.enabled ? " Enabled!" : " Disabled!"),\n\t\t\t\t\t\t\tcolor: module.enabled ? "lime" : "red"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse if (args[1] == "all") {\n\t\t\t\t\t\tfor(const [name, module] of Object.entries(modules)) module.toggle();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this.closeInput();\n\t\t\tcase ".modules":\n\t\t\t\tchatString = "Module List\\n";\n\t\t\t\tfor(const [name, module] of Object.entries(modules)) chatString += "\\n" + name;\n\t\t\t\tgame.chat.addChat({text: chatString});\n\t\t\t\treturn this.closeInput();\n\t\t\tcase ".binds":\n\t\t\t\tchatString = "Bind List\\n";\n\t\t\t\tfor(const [name, module] of Object.entries(modules)) chatString += "\\n" + name + " : " + (module.bind != "" ? module.bind : "none");\n\t\t\t\tgame.chat.addChat({text: chatString});\n\t\t\t\treturn this.closeInput();\n\t\t\tcase ".setoption":\n\t\t\tcase ".reset": {\n\t\t\t\tconst module = args.length > 1 && getModule(args[1]);\n\t\t\t\tconst reset = args[0] == ".reset";\n\t\t\t\tif (module) {\n\t\t\t\t\tif (args.length < 3) {\n\t\t\t\t\t\tchatString = module.name + " Options";\n\t\t\t\t\t\tfor(const [name, value] of Object.entries(module.options)) chatString += "\\n" + name + " : " + value[0].name + " : " + value[1];\n\t\t\t\t\t\tgame.chat.addChat({text: chatString});\n\t\t\t\t\t\treturn this.closeInput();\n\t\t\t\t\t}\n\n\t\t\t\t\tlet option;\n\t\t\t\t\tfor(const [name, value] of Object.entries(module.options)) {\n\t\t\t\t\t\tif (name.toLocaleLowerCase() == args[2].toLocaleLowerCase()) option = value;\n\t\t\t\t\t}\n\t\t\t\t\tif (!option) return;\n\t\t\t\t\t// the last value is the default value.\n\t\t\t\t\t// ! don't change the default value (the last option), otherwise .reset won't work properly!\n\t\t\t\t\tif (reset) {\n\t\t\t\t\t\toption[1] = option[option.length - 1];\n\t\t\t\t\t\tgame.chat.addChat({text: "Reset " + module.name + " " + option[2] + " to " + option[1]});\n\t\t\t\t\t\treturn this.closeInput();\n\t\t\t\t\t}\n\t\t\t\t\tif (option[0] == Number) option[1] = !isNaN(Number.parseFloat(args[3])) ? Number.parseFloat(args[3]) : option[1];\n\t\t\t\t\telse if (option[0] == Boolean) option[1] = args[3] == "true";\n\t\t\t\t\telse if (option[0] == String) option[1] = args.slice(3).join(" ");\n\t\t\t\t\tgame.chat.addChat({text: "Set " + module.name + " " + option[2] + " to " + option[1]});\n\t\t\t\t}\n\t\t\t\treturn this.closeInput();\n\t\t\t}\n\t\t\tcase ".config":\n\t\t\tcase ".profile":\n\t\t\t\tif (args.length > 1) {\n\t\t\t\t\tswitch (args[1]) {\n\t\t\t\t\t\tcase "save":\n\t\t\t\t\t\t\tglobalThis.${storeName}.saveVapeConfig(args[2]);\n\t\t\t\t\t\t\tgame.chat.addChat({text: "Saved config " + args[2]});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase "load":\n\t\t\t\t\t\t\tglobalThis.${storeName}.saveVapeConfig();\n\t\t\t\t\t\t\tglobalThis.${storeName}.loadVapeConfig(args[2]);\n\t\t\t\t\t\t\tgame.chat.addChat({text: "Loaded config " + args[2]});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase "import":\n\t\t\t\t\t\t\tglobalThis.${storeName}.importVapeConfig(args[2]);\n\t\t\t\t\t\t\tgame.chat.addChat({text: "Imported config"});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase "export":\n\t\t\t\t\t\t\tglobalThis.${storeName}.exportVapeConfig();\n\t\t\t\t\t\t\tgame.chat.addChat({text: "Config set to clipboard!"});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this.closeInput();\n\t\t}\n\t\tif (enabledModules["FilterBypass"] && !this.inputValue.startsWith('/')) {\n\t\t\tconst words = this.inputValue.split(" ");\n\t\t\tlet newwords = [];\n\t\t\tfor(const word of words) newwords.push(word.charAt(0) + '‎' + word.slice(1));\n\t\t\tthis.inputValue = newwords.join(' ');\n\t\t}\n\t`),n("const m=player.openContainer","const m = player.openContainer ?? { getLowerChestInventory: () => {getSizeInventory: () => 0} }",!0),n('document.addEventListener("contextmenu",m=>m.preventDefault());',"\n        if(typeof window.startImpactClient === 'function') { \n            console.log('[Impact Pre-Hook] Starting main client...'); \n            window.startImpactClient(); \n        }\n\n        // Tick Loop Hook\n        const original_update = player.onLivingUpdate;\n        player.onLivingUpdate = function(){\n            if (typeof window.ImpactClientTick === 'function') {\n                window.ImpactClientTick();\n            }\n            return original_update.apply(this, arguments);\n        };\n        "),console.log("[Impact Pre-Hook] Initializing MutationObserver to find game script."),new MutationObserver(async(n,o)=>{const a=n.flatMap(t=>[...t.addedNodes]).filter(t=>"SCRIPT"===t.tagName).find(t=>t.src&&t.src.includes("https://miniblox.io/assets/index"));a&&(console.log("[Impact Pre-Hook] Game script found:",a.src),o.disconnect(),await async function(n,o){try{console.log("[Impact Pre-Hook] Executing hook for script:",n),o&&(o.type="javascript/blocked",o.parentElement&&o.parentElement.removeChild(o));const a=function(n){let o=n;for(const[n,a]of Object.entries(e)){let e;try{e=new RegExp(a.replace(/\\/g,"\\"))}catch(t){console.error("[Impact Pre-Hook] Invalid regex string for dump:",n,a,t);continue}const i=o.match(e);if(i&&i[1]){console.log(`[Impact Pre-Hook] Dumped ${n}: ${i[1]}`);for(const[e,o]of Object.entries(t))if("string"==typeof e&&e.includes(n)){const a=e.replace(new RegExp(n,"g"),i[1]),s="string"==typeof o[0]?o[0].replace(new RegExp(n,"g"),i[1]):o[0];t[a]=[s,o[1]],delete t[e]}}else console.warn(`[Impact Pre-Hook] Could not match dump for ${n}`)}for(const[e,n]of Object.entries(t))try{const t=new RegExp(e.replace(/[.*+?^${}()|[\\]]/g,"\\$&"));o=o.replace(t,n[1]?n[0]:e+n[0])}catch(t){console.error("Failed to apply modification for key:",e,t)}return o}(await fetch(n).then(t=>t.text())),i=document.createElement("script");i.type="module",i.textContent=a,document.head.appendChild(i),i.remove(),console.log("[Impact Pre-Hook] Injected modified game code."),"function"==typeof window.startImpactClient&&(console.log("[Impact Pre-Hook] Calling startImpactClient()."),window.startImpactClient())}catch(t){console.error("[Impact Pre-Hook] executeHook failed:",t)}}(a.src,a))}).observe(document,{childList:!0,subtree:!0})}();